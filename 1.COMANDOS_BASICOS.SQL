CREATE TABLE TALUNO
(
    COD_ALUNO INTEGER NOT NULL, -- TIPO INTEIRO NÃO VAZIO
    NOME VARCHAR(30),
    CIDADE VARCHAR2(30),
    CEP VARCHAR(10),
    PRIMARY KEY (COD_ALUNO) -- NÃO ACEITA CÓDIGOS IGUAIS POR SER CHAVE PRIMÁRIA
);

SELECT * FROM TALUNO;

INSERT INTO TALUNO(COD_ALUNO,NOME,CIDADE,CEP)
VALUES (1, 'VICTOR', 'SAO GONCALO', '12546398');

INSERT INTO TALUNO(COD_ALUNO,NOME,CIDADE,CEP)
VALUES (2, 'PAULA', 'IVOTI', '78985444');

INSERT INTO TALUNO(COD_ALUNO,NOME,CIDADE,CEP)
VALUES (3, 'MARIA', 'SAPIRANGA', '78546325');


-- FAZENDO O MESMO PROCESSO ACIMA, PORÉM DE FORMA SIMPLIFICADA

CREATE TABLE TCURSO
(
    COD_CURSO INTEGER NOT NULL PRIMARY KEY,
    NOME VARCHAR(30),
    VALOR NUMBER(8,2),
    CARGA_HORARIA INTEGER
);

SELECT * FROM TCURSO;

INSERT INTO TCURSO VALUES(1, 'ORACLE SQL e PL/SQL',500,25);
INSERT INTO TCURSO VALUES(2, 'ORACLE DBA',499,25);
INSERT INTO TCURSO VALUES(3, 'JAVA FUNDAMENTOS E 00',1500,100);
INSERT INTO TCURSO VALUES(4, 'JAVASERVER FACES',1600,100);


CREATE TABLE TCONTRATO
(
    COD_CONTRATO INTEGER NOT NULL PRIMARY KEY,
    DATA DATE,
    COD_ALUNO INTEGER,
    TOTAL NUMBER(8,2),
    DESCONTO NUMBER(5,2)
);

SELECT * FROM TCONTRATO;

INSERT INTO TCONTRATO VALUES(1, SYSDATE   ,1 ,500,10);
INSERT INTO TCONTRATO VALUES(2, SYSDATE   ,2 ,500,10);
INSERT INTO TCONTRATO VALUES(3, SYSDATE   ,3 ,1500,05);
INSERT INTO TCONTRATO VALUES(4, SYSDATE-5 ,2 ,1600,10);
INSERT INTO TCONTRATO VALUES(5, SYSDATE-4 ,5 ,800,10);
INSERT INTO TCONTRATO VALUES(6, SYSDATE-3 ,5 ,445,0);
INSERT INTO TCONTRATO VALUES(7, SYSDATE-2 ,5 ,445,20);

-- CASO QUEIRA ADICIONAR COLUNA NA TABELA

ALTER TABLE TCONTRATO ADD TESTE VARCHAR(50);


-- CASO QUEIRA DELETAR COLUNA DA TABELA

ALTER TABLE TCONTRATO DROP COLUMN TESTE;


-- CASO QUEIRA ALTERAR NOME DE COLUNA
ALTER TABLE TALUNO RENAME COLUMN NOME TO NOME2; --PARA ACESSAR A MODIFICAÇÃO, UTILIZE F12
-- COLOCANDO DE VOLTA AO NORMAL
ALTER TABLE TALUNO RENAME COLUMN NOME2 TO NOME;


-- PARA EXCLUIR TABELA
DROP TABLE TABELA;


--INSERINDO MAIS REGISTROS NA TABELA (FORMA SEQUENCIAL - PARA AUTOMATIZAR O CÓDIGO)

CREATE SEQUENCE SEQ_ALUNO START WITH 4; 

INSERT INTO TALUNO(COD_ALUNO,NOME,CIDADE,CEP)
VALUES (SEQ_ALUNO.NEXTVAL,'ANDRE','IVOTI', '12547896');

SELECT * FROM TALUNO;

COMMIT;


-- ACESSANDO A DATA ATUAL
SELECT SYSDATE FROM DUAL; -- DUAL É UMA TABELA FICTÍCIA PARA COMPLETAR A SINTAXE PARA EXECUTAR FUNÇÕES


-- ACESSANDO O VALOR ATUAL DA SEQUENCE
SELECT SEQ_ALUNO.CURRVAL FROM DUAL;


-- CONFIRMA ALTERAÇÕES REALIZADAS (INSERT, UPDATE E DELETE)
COMMIT;

SELECT * FROM TALUNO;

-- APAGA TODOS OS REGISTROS DA TABELA
DELETE FROM TALUNO;

-- DESFAZ ALTERAÇÕES REALIZADAS NA TABELA (NÃO DESFAZ AS ALTERAÇÕES DEPOIS DE UTILIZAR O COMMIT)
ROLLBACK;


-- DELETANDO APENAS UM REGISTRO DA TABELA PELO VALOR
-- É NECESSÁRIO QUE O BLOCO SEJA EXECUTADO AO MESMO TEMPO
DELETE FROM TALUNO WHERE COD_ALUNO = 26;


-- PARA DESFAZER SÓ UTILIZAR O ROLLBACK
ROLLBACK;


-- PARA FILTRAR O REGISTRO NA TABELA ATRAVÉS DO NOME (PODE-SE FAZER O MESMO COM O CÓDIGO)
SELECT * FROM TALUNO WHERE NOME = 'VICTOR';


-- DELETANDO PELO NOME
DELETE FROM TALUNO WHERE NOME = 'PAULA';


COMMIT;


CREATE TABLE TITEM
(
    COD_ITEM INTEGER NOT NULL PRIMARY KEY,
    COD_CURSO INTEGER,
    COD_CONTRATO INTEGER,
    VALOR NUMBER(8,2)
);

INSERT INTO TITEM VALUES (1, 1, 1, 500);
INSERT INTO TITEM VALUES (2, 1, 2, 500);
INSERT INTO TITEM VALUES (3, 3, 3, 1500);
INSERT INTO TITEM VALUES (4, 4, 4, 1600);
INSERT INTO TITEM VALUES (5, 1, 5, 500);
INSERT INTO TITEM VALUES (6, 1, 6, 500);
INSERT INTO TITEM VALUES (7, 2, 6, 500);
INSERT INTO TITEM VALUES (8, 3, 7, 500);

COMMIT;

SELECT * FROM TITEM;


SELECT * FROM TCONTRATO
WHERE COD_CONTRATO = 2;


--ALTERANDO UM REGISTRO NA TABELA DE CONTRATO
UPDATE TCONTRATO SET
  DESCONTO = 15
WHERE COD_CONTRATO = 2;

SELECT SYSDATE FROM DUAL;


UPDATE TCONTRATO SET
  DESCONTO = 20,
  DATA = '03/05/2010',
  TOTAL = 2500
WHERE COD_CONTRATO = 2;


-- MUDANDO NOME DA CIDADE
SELECT * FROM TALUNO;

UPDATE TALUNO SET
  CIDADE = 'CANOAS'
 WHERE Upper(CIDADE) = 'IVOTI'; --Upper - TRANSFORMA A COLUNA SOMENTE PARA O UPDATE SELECIONADO


--MUDANDO NOME DO ALUNO
UPDATE TALUNO SET
  NOME = 'FRIDA'
 WHERE COD_ALUNO = 5;
 
--

UPDATE TCURSO SET
  VALOR = 499.99
 WHERE COD_CURSO = 1;
 
COMMIT;
