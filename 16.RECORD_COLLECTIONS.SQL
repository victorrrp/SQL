--TRABALHANDO COM RECORD E COLLECTION


--EXEMPLO DE RECORD SIMPLES
DECLARE
  TYPE REC_ALUNO IS RECORD
  (
   COD_ALUNO NUMBER NOT NULL := 0,
   NOME      TALUNO.NOME%TYPE,
   CIDADE    TALUNO.CIDADE%TYPE
  );
  
  REGISTRO REC_ALUNO;
BEGIN
  REGISTRO.COD_ALUNO   := 50;
  REGISTRO.NOME         := 'MASTER';
  REGISTRO.CIDADE       := 'NOVO HAMBURGO';
  DBMS_OUTPUT.PUT_LINE('CODIGO: '||REGISTRO.COD_ALUNO);
  DBMS_OUTPUT.PUT_LINE('NOME:   '||REGISTRO.NOME);
  DBMS_OUTPUT.PUT_LINE('CIDADE: '||REGISTRO.CIDADE);
END;


--OUTRO EXEMPLO NA PRATICA
--O REGISTRO 'REG' RECEBERÁ TODA ESTRUTURA
DECLARE
  REG TALUNO%ROWTYPE; --RECORD
  VCEP VARCHAR(10) := '98300000';
BEGIN
  SELECT COD_ALUNO, NOME, CIDADE
  INTO REG.COD_ALUNO, REG.NOME, REG.CIDADE
  FROM TALUNO
  WHERE COD_ALUNO = 1;
  
  REG.CEP := '93500000';
  REG.SALARIO := 1500;
  
  
  DBMS_OUTPUT.PUT_LINE('CODIGO : ' ||REG.COD_ALUNO);
  DBMS_OUTPUT.PUT_LINE('NOME   : ' ||REG.NOME);
  DBMS_OUTPUT.PUT_LINE('CIDADE : ' ||REG.CIDADE);
  DBMS_OUTPUT.PUT_LINE('CEP    : ' ||REG.CEP);
  DBMS_OUTPUT.PUT_LINE('SALARIO: ' ||REG.SALARIO);
END;


--MAIS EXEMPLOS
DECLARE
  TYPE T_ALUNO IS TABLE OF TALUNO.NOME%TYPE
  INDEX BY BINARY_INTEGER;
  
  REGISTRO T_ALUNO; --RECORD
BEGIN 
  REGISTRO(1) := 'MARCIO';
  REGISTRO(2) := 'JOSE';
  REGISTRO(3) := 'PEDRO';
  DBMS_OUTPUT.PUT_LINE('NOME 1: ' ||REGISTRO(1));
  DBMS_OUTPUT.PUT_LINE('NOME 2: ' ||REGISTRO(2));
  DBMS_OUTPUT.PUT_LINE('NOME 3: ' ||REGISTRO(3));
END;




SELECT COD_ALUNO, NOME
FROM TALUNO WHERE COD_ALUNO = 1;

DECLARE
  TYPE NOME_TYPE IS TABLE OF TALUNO.NOME%TYPE;
  NOME_TABLE NOME_TYPE := NOME_TYPE();          --CRIANDO INSTÂNCIA
BEGIN
  NOME_TABLE.EXTEND;               --ALOCANDO NOVA LINHA NA INSTANCIA
  NOME_TABLE(1)  :='PEDRO';
  NOME_TABLE.EXTEND;               --ALOCANDO NOVA LINHA NA INSTANCIA
  NOME_TABLE(2)  :='MARCIO';
  DBMS_OUTPUT.PUT_LINE('NOME 1: '||NOME_TABLE(1));
  DBMS_OUTPUT.PUT_LINE('NOME 2: '||NOME_TABLE(2));
END;

DECLARE
  TYPE TIPO IS TABLE OF VARCHAR2(30) INDEX BY VARCHAR2(2);
  UF_CAPITAL TIPO;
BEGIN
  UF_CAPITAL('RS') := 'PORTO ALEGRE';
  UF_CAPITAL('RJ') := 'RIO DE JANEIRO';
  UF_CAPITAL('PR') := 'CURITIBA';
  UF_CAPITAL('MT') := 'CUIABA';
  DBMS_OUTPUT.PUT_LINE(UF_CAPITAL('RS'));
  DBMS_OUTPUT.PUT_LINE(UF_CAPITAL('RJ'));
  DBMS_OUTPUT.PUT_LINE(UF_CAPITAL('PR'));
  DBMS_OUTPUT.PUT_LINE(UF_CAPITAL('MT'));
END;


--UTILIZANDO ARRAY. DEFININDO TAMANHO
DECLARE 
  TYPE NOME_VARRAY IS VARRAY(5) OF TALUNO.NOME%TYPE;
  NOME_VETOR NOME_VARRAY := NOME_VARRAY();
BEGIN
  NOME_VETOR.EXTEND;
  NOME_VETOR(1) := 'MARCIO';
  DBMS_OUTPUT.PUT_LINE(NOME_VETOR(1));
END;
  
  
  
  
  