-- LIMITANDO AS LINHAS SELECIONADAS
SELECT * FROM TALUNO;


-- ACRESCENTANDO NOVA COLUNA
ALTER TABLE TALUNO ADD ESTADO CHAR(2) DEFAULT 'RJ';

ALTER TABLE TALUNO ADD SALARIO NUMBER (8,2) DEFAULT 620;


-- WHERE (ONDE)-> RESTRINGE A CONSULTA E POSSIBILITA MUDANÇAS PARA AS LINHAS QUE SATISFAÇAM A CONDIÇÃO
UPDATE TALUNO SET
       ESTADO = 'SP', 
       CIDADE = 'SÃO PAULO', 
       SALARIO = 852
WHERE COD_ALUNO = 3;

UPDATE TALUNO SET
       ESTADO = 'CE', 
       CIDADE = 'FORTALEZA', 
       SALARIO = 900
WHERE COD_ALUNO = 4;


-- NÃO MODIFICANDO POIS A CIDADE JÁ ESTÁ CORRETA
UPDATE TALUNO SET
       ESTADO = 'RS', 
       SALARIO = 1500
WHERE COD_ALUNO = 5;


-- FAZENDO UM FILTRO TRAZENDO SOMENTE A LINHA QUE TENHA 'RJ'
SELECT * FROM TALUNO
WHERE ESTADO <> 'SP'
AND SALARIO <= 800
ORDER BY SALARIO DESC;


INSERT INTO TALUNO (COD_ALUNO, NOME, CIDADE)
VALUES (SEQ_ALUNO.NEXTVAL,'OLIVEIRA','DOIS IRMÃOS');

INSERT INTO TALUNO (COD_ALUNO, NOME, CIDADE)
VALUES (SEQ_ALUNO.NEXTVAL,'JOAO','QUATRO IRMÃOS');

SELECT * FROM TALUNO


-- ALTERANDO A COLUNA DE CÓGICO DO ALUNO (É TOTALMENTE POSSIVEL ALTERAR AS OUTRAS COLUNAS)
UPDATE TALUNO SET
ESTADO = 'SP',
SALARIO = 900,
COD_ALUNO = 2
WHERE NOME = 'JOAO';


-- ALTERANDO COLUNA DE CÓDIGO E NOME
UPDATE TALUNO SET
COD_ALUNO = 6,
NOME = 'FRIDA'
WHERE CIDADE = 'DOIS IRMÃOS'; 


-- ORDENANDO POR MAIS DE UMA TABELA
SELECT ESTADO, SALARIO, NOME FROM TALUNO
ORDER BY ESTADO, SALARIO DESC; -- DESC -> DETERMINA A ORDEM DOS VALORES A SER MOSTRADO DENTRO DE UMA COLUNA


ALTER TABLE TALUNO ADD NASCIMENTO DATE DEFAULT SYSDATE - 1000; 
-- CASO A DATA NÃO SEJA PREENCHIDA, ELA APARECERÁ MIL DIAS ATRASADA. EX.:
-- HOJE: 01/10/2019. SYSDATE - 1000: 04/01/2017

SELECT SYSDATE - SYSDATE - 10 FROM DUAL;

SELECT * FROM TALUNO

-- MUDANDO AS DATAS INDIVIDUALMENTE
UPDATE TALUNO SET
NASCIMENTO = '10/10/2004'
WHERE COD_ALUNO = 1;

UPDATE TALUNO SET
NASCIMENTO = '10/05/2003'
WHERE COD_ALUNO = 2;

SELECT * FROM TALUNO

--FILTRANDO TABELA POR DATA
SELECT COD_ALUNO, NASCIMENTO, Trunc(NASCIMENTO), NOME 
FROM TALUNO
WHERE Trunc(NASCIMENTO) = '25/08/2017';

--FILTRANDO DENTRO UM PERÍODO DENTRO DE HORAS
SELECT COD_ALUNO, NASCIMENTO, TRUNC(NASCIMENTO), NOME 
FROM TALUNO
WHERE NASCIMENTO
      BETWEEN TO_DATE('21/05/2013 22:00','DD/MM/YYYY HH24:MI') -- ENTRE (NO SENTIDO DE "ENTRE 0 E 10") 
              AND TO_DATE('25/08/2013 23:55','DD/MM/YYYY HH24:MI')
              

-- UTILIZANDO CALCULO EM WHERE
SELECT COD_CONTRATO, DATA, TOTAL, DESCONTO, 
       DESCONTO + 1000 AS CALCULO
FROM TCONTRATO
WHERE TOTAL <= DESCONTO + 1000;


SELECT * FROM TCONTRATO;


UPDATE TCONTRATO SET
DESCONTO = NULL
WHERE COD_CONTRATO = 2;

SELECT * FROM TCONTRATO 
WHERE DESCONTO IS NULL; -- SOMENTE DESCONTOS DE VALOR NULO

SELECT * FROM TCONTRATO
WHERE DESCONTO IS NOT NULL; -- SOMENTE DESCONTOS QUE NÃO SÃO NULOS


SELECT * FROM TCONTRATO
WHERE DESCONTO BETWEEN 0 AND 10; -- BUSCANDO APENAS DESCONTOS QUE ESTÃO ENTRE 0 E 10


--TRAZENDO VALOR NULO COMO ZERO DENTRO DE BETWEEN
SELECT COD_CONTRATO, TOTAL, DESCONTO, NVL(DESCONTO, 0)
FROM TCONTRATO
WHERE NVL(DESCONTO,0) BETWEEN 0 AND 10;


--OUTRA FORMA DE UTILIZAR O BETWEEN
SELECT * FROM TCONTRATO
WHERE DESCONTO >=0
AND DESCONTO <= 10
OR DESCONTO IS NULL;


--OUTRAS FILTRAENS NO SISTEMA (SELECT IN)
SELECT * FROM TITEM
WHERE COD_CURSO IN (1,2,4);


--BUSCANDO POR REGISTROS CUJOS CÓDIGOS NÃO ESTEJAM NA LISTA
SELECT * FROM TITEM
WHERE COD_CURSO NOT IN (1,2,4); -- AQUI DEIXO EXPLÍCITO OS QUE NÃO QUERO QUE APAREÇA

SELECT * FROM TCURSO

--ACRESCENTANDO MAIS UM CURSO NA TABELA
INSERT INTO TCURSO VALUES (5, 'WINDOWS', 1000, 50);


--CHAMANDO CURSOS NÃO VENDIDOS
SELECT * FROM TCURSO
WHERE COD_CURSO NOT IN (SELECT COD_CURSO FROM TITEM)


--CHAMANDO CURSOS VENDIDOS
SELECT * FROM TCURSO
WHERE COD_CURSO IN (SELECT COD_CURSO FROM TITEM)


--EQUIVALENTE AO SELECT IN
SELECT * FROM TITEM
WHERE COD_CURSO = 1
OR COD_CURSO    = 2
OR COD_CURSO    = 4


--FILTRAGEM POR LETRA/PALAVRA
SELECT * FROM TCURSO WHERE NOME LIKE 'W%' --ONDE INICIA A PALAVRA
SELECT * FROM TCURSO WHERE NOME LIKE '%JAVA%' --EM QUALQUER LUGAR NO CAMPO
SELECT * FROM TCURSO WHERE NOME LIKE '%FACES' --ONDE TERMINA A PALAVRA

SELECT * FROM TCURSO

ALTER TABLE TCURSO ADD PRE_REQ INTEGER; --PRE REQUISITOS ENTRE CURSOS

UPDATE TCURSO SET
PRE_REQ = 1
WHERE COD_CURSO = 2;

UPDATE TCURSO SET
PRE_REQ = 3
WHERE COD_CURSO = 4


--CURSOS SEM PRÉ REQUISITOS
SELECT * FROM TCURSO WHERE PRE_REQ IS NULL

--CURSOS COM PRÉ REQUISITOS
SELECT * FROM TCURSO WHERE PRE_REQ IS NOT NULL


--PRECEDÊNCIA DE OPERADORES
-- 1º:() - 2º: AND - 3º: OR

--MANEIRA ERRADA 
SELECT * FROM TCURSO
WHERE VALOR > 750
OR VALOR < 1000
AND CARGA_HORARIA = 25


--MANEIRA CORRETA
SELECT * FROM TCURSO
WHERE (VALOR>750
OR VALOR < 1000)
AND CARGA_HORARIA = 25;








